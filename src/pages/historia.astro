---
import Layout from "../layouts/Layout.astro";

const stories = [
  {
    time: "2024",
    title: "Ingreso a una InstituciÃ³n Superior",
    description: "Entre tus brazos encontrÃ© mi lugar favorito en el mundo.",
    img: "/img/historia/02.jpg",
  },
  {
    time: "2023",
    title: "TerminÃ³ sus estudios secundarios",
    description: "Nos prometimos apoyarnos en cada paso â€” un pacto de amor y ternura.",
    img: "/img/historia/01.png",
  },
];
---

<Layout title="Nuestra Historia">
  
  <section class="min-h-screen flex justify-center items-center bg-black text-pink-300 py-12 px-4">
  
    <div class="w-full max-w-4xl text-center [margin-top:1rem]">
      <h1 class="text-3xl sm:text-4xl font-extrabold mb-10 tracking-wide drop-shadow-lg">
        Nuestra Historia ðŸ’ž
      </h1>

      <div class="relative pl-8 sm:pl-12 text-left inline-block">
        <!-- LÃ­nea vertical -->
        <div class="absolute left-3 sm:left-5 top-0 bottom-0 w-1 bg-pink-800/60 rounded"></div>

        <div class="space-y-10">
          {stories.map((entry, i) => (
            <article class="relative">
              <!-- Punto -->
              <div class="absolute -left-10 sm:-left-12 top-2 w-10 h-10 bg-black/80 rounded-full shadow-lg border-4 border-pink-700 flex items-center justify-center">
                <div class="w-4 h-4 bg-pink-500 rounded-full animate-pulse"></div>
              </div>

              <div class="bg-gradient-to-r from-black/60 to-black/50 border border-pink-900/30 rounded-2xl p-5 sm:p-6 shadow-lg transform transition hover:scale-[1.01]">
                <header class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
                  <div>
                    <time class="text-sm text-pink-300/90 font-semibold">{entry.time}</time>
                    <h2 class="text-xl sm:text-2xl font-bold text-pink-200 mt-1">{entry.title}</h2>
                  </div>
                  <span class="mt-2 sm:mt-0 inline-block text-xs text-pink-400/80">Paso {i + 1}</span>
                </header>

                <div class="mt-3 sm:mt-4 grid grid-cols-1 sm:grid-cols-3 gap-4 items-center">
                  <p class="sm:col-span-2 text-pink-200/90 leading-relaxed">
                    {entry.description}
                  </p>

                  <figure class="w-full sm:col-span-1">
                    <img
                      src={entry.img}
                      alt={entry.title}
                      class="w-full h-36 sm:h-28 object-cover rounded-lg border-2 border-pink-800 shadow-inner cursor-pointer hover:opacity-90 transition"
                      loading="lazy"
                      onclick={`openModal('${entry.img}', '${entry.title}', '${entry.description}', '${entry.time}')`}
                    />
                    <figcaption class="text-xs text-pink-400/70 mt-2">
                      Recuerdo â€” {entry.time}
                    </figcaption>
                  </figure>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Modal romÃ¡ntico mejorado -->
  <div
    id="imageModal"
    class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-md p-4"
  >
    <div class="relative w-full max-w-2xl bg-gradient-to-b from-pink-900/90 to-black/95 rounded-3xl border border-pink-500/50 shadow-2xl transform scale-95 opacity-0 transition-all duration-300 modal-content">
      <!-- BotÃ³n cerrar -->
      <button
        onclick="closeModal()"
        class="absolute top-3 right-3 text-pink-300 hover:text-pink-100 text-3xl font-bold transition"
      >
        âœ•
      </button>

      <img id="modalImage" src="" alt="" class="w-full rounded-t-3xl max-h-[320px] object-cover" />
      <div class="p-6 text-center">
        <h2 id="modalTitle" class="text-2xl sm:text-3xl font-extrabold text-pink-200 drop-shadow mb-3">
          TÃ­tulo
        </h2>
        <p id="modalDesc" class="text-pink-100/90 text-lg leading-relaxed mb-2"></p>
        <span id="modalTime" class="text-xs text-pink-300/80 italic"></span>
      </div>
    </div>
  </div>

  <script  type="text/javascript" >
    function openModal(imgSrc, title, desc, time) {
      const modal = document.getElementById("imageModal");
      const modalContent = modal.querySelector(".modal-content");
      const modalImg = document.getElementById("modalImage");
      const modalTitle = document.getElementById("modalTitle");
      const modalDesc = document.getElementById("modalDesc");
      const modalTime = document.getElementById("modalTime");

      modal.classList.remove("hidden");
      setTimeout(() => {
        modalContent.classList.remove("scale-95", "opacity-0");
        modalContent.classList.add("scale-100", "opacity-100");
      }, 50);

      modalImg.src = imgSrc;
      modalTitle.textContent = title;
      modalDesc.textContent = desc;
      modalTime.textContent = `AÃ±o: ${time}`;
    }

    function closeModal() {
      const modal = document.getElementById("imageModal");
      const modalContent = modal.querySelector(".modal-content");
      modalContent.classList.add("scale-95", "opacity-0");
      modalContent.classList.remove("scale-100", "opacity-100");
      setTimeout(() => {
        modal.classList.add("hidden");
      }, 300);
    }
  </script>

  <style>
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(8px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    section > div > div > .space-y-10 > article {
      animation: fadeUp 420ms ease both;
    }
  </style>
</Layout>

